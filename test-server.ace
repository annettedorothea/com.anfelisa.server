
com.anfelisa.test

target JAVA

ACE {
	GET LoadPublicTests uses TestList
	GET LoadPublicTest uses Test
	GET LoadPrivateTests uses MyTestList
	GET LoadPrivateTest uses MyTest
	GET GetTest uses TestCreation
	GET GetCardsOfTest uses CardContentHashList
	GET GetAllTests uses SimpleTestList
	
	POST CreateTest uses TestCreation {
		on created ( Test.createTest )
	}
	PUT UpdateTest uses TestCreation {
		on updated (Test.updateTest)
	}
	DELETE DeleteTest uses TestId {
		on deleted (Test.deleteTest)
	}
}

views {
	Test {
		createTest (TestCreation)
		updateTest (TestCreation)
		deleteTest (TestId)
	}
}

models {
	schema public
	persistent Test {
		Unique PrimaryKey NotNull String testId
		NotNull String name
		Integer sequence
		NotNull String lessonId references com.anfelisa.lesson.Lesson.lessonId
		NotNull String html
		NotNull String author references com.anfelisa.user.User.username
	}

	TestId {
		NotNull String testId
	} 

	MyTest {
		NotNull String testId
		NotNull String name
		Integer sequence
		Integer resultCount
		Boolean hasResults
		List com.anfelisa.result.ResultAbstract resultAbstractList 
	} 
	
	TestList {
		List Test testList
	}
	
	MyTestList {
		List MyTest myTestList
	}
	
	CardContentHashList {
		List Integer contentHashList
	}
}

data {
	TestCreation : ( Test )
	TestList : (TestList com.anfelisa.lesson.LessonId com.anfelisa.lesson.LessonAbstract com.anfelisa.course.CourseAbstract)
	SimpleTestList : (TestList com.anfelisa.lesson.LessonId)
	Test : ( Test com.anfelisa.lesson.LessonId com.anfelisa.lesson.LessonAbstract com.anfelisa.course.CourseAbstract TestList) 
	MyTestList : (MyTestList com.anfelisa.lesson.LessonId com.anfelisa.user.Username com.anfelisa.lesson.LessonAbstract com.anfelisa.course.CourseAbstract)
	MyTest : ( Test com.anfelisa.lesson.LessonId com.anfelisa.user.Username com.anfelisa.lesson.LessonAbstract com.anfelisa.course.CourseAbstract MyTestList) 
	CardContentHashList : (CardContentHashList TestId)
	TestId : (TestId)
}

